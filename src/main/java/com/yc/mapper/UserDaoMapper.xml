<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.yc.mapper.UserDaoMapper">
	<!-- 使用默认的mybatis配置  二级缓存 -->
	<cache eviction="FIFO" flushInterval="60000" size="512" readOnly="true"></cache>
	
	<!-- 添加用户返回用户的编号 -->
	<insert id="addUser" parameterType="Users" useGeneratedKeys="true" keyProperty="id">
		insert into Users(name,password,telephone,username,isadmin) 
		values(#{name},#{password},
		<choose>
			<when test="telephone!=null">
			#{telephone}
			</when>
			<otherwise>''</otherwise>
		</choose>
		,#{username},
		<choose>
			<when test="isadmin!=null">
			#{isadmin}
			</when>
			<otherwise>'0'</otherwise>
		</choose>
		)
	</insert>
	
	<!-- 根据用户名和密码查用户 -->
	<select id="loginUser" parameterType="Users">
		select * from Users where username = #{username} and password=#{password}
	</select>
	
	<!-- 通过登录根据id查用户 -->
	<select id="findbyId" parameterType="Integer" resultType="Users">
		select * from users where id=#{id}
	</select>
	
	<!-- 通过登录根据username查用户 -->
	<select id="isExist" parameterType="Users" resultType="Integer">
		select count(1) from users where username=#{username}
	</select>
	
	<select id="findId" parameterType="String" resultType="Integer">
		select id  from users where username=#{username}
	</select>
	
</mapper>